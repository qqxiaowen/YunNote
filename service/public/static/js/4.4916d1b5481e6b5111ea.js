webpackJsonp([4],{"R9//":function(e,t){},hp21:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=s("Dd8w"),o=s.n(a),i=(s("mtWM"),{data:function(){return{info:{oldpassword:"",newpassword:"",surepassword:""},token:{token:""},imageUrl:"",isshowpassword:!1}},methods:{gettoken:function(){var e=this;this.$axios.get("/getToken").then(function(t){e.token.token=t.data})},handleAvatarSuccess:function(e,t){this.info.avatar=e.url},reviseinfo:function(){var e=this;this.info.newpassword!=this.info.surepassword?this.$message.warning("两次输入的密码不一致"):this.$axios.put("/user/"+this.$route.query.email,this.info).then(function(t){if(200==t.code){e.$message.success(t.msg),setTimeout(function(){e.$router.push("/")},500);e.$store.commit("CHANGEINFO",{avatar:"",email:"",username:"",password:""})}else e.$message.error(t.msg)})},handlepassword:function(){this.isshowpassword=!0},getuserinfo:function(){var e=this,t=this.$route.query.email;this.$axios.get("/user/"+t).then(function(t){e.info=o()({},e.info,t.data)})}},created:function(){this.getuserinfo(),this.gettoken()}}),n={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("el-breadcrumb",{staticStyle:{margin:"15px 0"},attrs:{"separator-class":"el-icon-arrow-right"}},[s("el-breadcrumb-item",{attrs:{to:{path:"/"}}},[e._v("首页")]),e._v(" "),s("el-breadcrumb-item",[e._v("修改个人信息页")])],1),e._v(" "),s("div",{staticClass:"revisebox"},[s("el-form",{ref:"form",staticClass:"form_ys",attrs:{"label-width":"140px","label-position":"left"}},[s("el-form-item",{attrs:{label:"您的邮箱:"}},[s("el-input",{attrs:{disabled:""},model:{value:e.info.email,callback:function(t){e.$set(e.info,"email",t)},expression:"info.email"}})],1),e._v(" "),s("el-form-item",{attrs:{label:"您的用户名:"}},[s("el-input",{model:{value:e.info.username,callback:function(t){e.$set(e.info,"username",t)},expression:"info.username"}})],1),e._v(" "),s("el-form-item",{attrs:{label:"点击修改您的头像:"}},[s("el-upload",{staticClass:"avatar-uploader",attrs:{method:"psot",action:"https://up-z1.qiniup.com",data:e.token,"on-success":e.handleAvatarSuccess,"show-file-list":!1}},[e.info.avatar?s("img",{staticClass:"avatar",attrs:{src:e.info.avatar}}):s("i",{staticClass:"el-icon-plus avatar-uploader-icon"})])],1),e._v(" "),e.isshowpassword?s("div",[s("el-form-item",{attrs:{label:"请输入您的原密码:"}},[s("el-input",{attrs:{type:"password"},model:{value:e.info.oldpassword,callback:function(t){e.$set(e.info,"oldpassword",t)},expression:"info.oldpassword"}})],1),e._v(" "),s("el-form-item",{attrs:{label:"请输入您的新密码:"}},[s("el-input",{attrs:{type:"password"},model:{value:e.info.newpassword,callback:function(t){e.$set(e.info,"newpassword",t)},expression:"info.newpassword"}})],1),e._v(" "),s("el-form-item",{attrs:{label:"再次输入:"}},[s("el-input",{attrs:{type:"password"},nativeOn:{keyup:function(t){return"button"in t||!e._k(t.keyCode,"enter",13,t.key,"Enter")?e.reviseinfo(t):null}},model:{value:e.info.surepassword,callback:function(t){e.$set(e.info,"surepassword",t)},expression:"info.surepassword"}})],1)],1):s("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.handlepassword}},[e._v("点击修改密码")]),e._v(" "),s("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.reviseinfo}},[e._v("点击修改")])],1)],1)],1)},staticRenderFns:[]};var r=s("VU/8")(i,n,!1,function(e){s("R9//")},"data-v-764798fb",null);t.default=r.exports}});
//# sourceMappingURL=4.4916d1b5481e6b5111ea.js.map