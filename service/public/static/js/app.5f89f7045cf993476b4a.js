webpackJsonp([7],{"/0dl":function(t,e){},FBcc:function(t,e){},Jjzg:function(t,e){},NHnr:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=n("7+uW"),s=n("Xxa5"),r=n.n(s),i=n("exGp"),o=n.n(i),c={methods:{handleLogout:function(){var t=this;return o()(r.a.mark(function e(){var n,a;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.$axios.get("/logout");case 2:n=e.sent,console.log(n),a={_id:"",avatar:"",email:"",username:"",password:""},200==n.code?(t.$message.success("退出登录成功"),t.$store.commit("CHANGEINFO",a)):(t.$store.commit("CHANGEINFO",a),t.$message({type:"warning",message:"登录状态失效，自动退出登录"})),t.$router.push("/");case 7:case"end":return e.stop()}},e,t)}))()},gowritenote:function(){this.$message.warning("需要先登录哟")},handleCommand:function(t){switch(t){case"a":this.$router.push("/mynotelist?id="+this.$store.state.userinfo._id);break;case"b":this.$router.push("/reviseuser?email="+this.$store.state.userinfo.email);break;case"c":this.$router.push("/writenote");break;case"d":this.handleLogout()}}}},u={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"Header"},[n("div",{staticClass:"Header_count w1170"},[n("h1",[n("router-link",{attrs:{to:"/notelist"}},[t._v("云笔记")])],1),t._v(" "),t.$store.state.userinfo.avatar?n("el-dropdown",{staticClass:"down_box1",on:{command:t.handleCommand}},[n("span",{staticClass:"down_box2"},[n("div",{staticClass:"img_box"},[n("img",{attrs:{src:t.$store.state.userinfo.avatar,alt:""}})]),t._v(" "),n("i",{staticClass:"el-icon-arrow-down"})]),t._v(" "),n("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[n("el-dropdown-item",{attrs:{command:"c"}},[t._v("写笔记")]),t._v(" "),n("el-dropdown-item",{attrs:{command:"a"}},[t._v("我的笔记")]),t._v(" "),n("el-dropdown-item",{attrs:{command:"b"}},[t._v("个人信息")]),t._v(" "),n("el-dropdown-item",{attrs:{command:"d"}},[t._v("退出登录")])],1)],1):n("el-button",{staticClass:"bt_ys",on:{click:t.gowritenote}},[t._v("未登录")])],1)])},staticRenderFns:[]};var l={components:{Header:n("VU/8")(c,u,!1,function(t){n("Pzn0")},"data-v-00b0cbb4",null).exports}},d={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"Layout"},[e("Header"),this._v(" "),e("div",{staticClass:"w1170 content"},[e("router-view")],1)],1)},staticRenderFns:[]};var m={name:"App",components:{Layout:n("VU/8")(l,d,!1,function(t){n("FBcc")},"data-v-7d1c7758",null).exports}},p={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{attrs:{id:"app"}},[e("Layout")],1)},staticRenderFns:[]};var v=n("VU/8")(m,p,!1,function(t){n("rlFD")},null,null).exports,f=n("/ocq"),h=n("Y81h"),g=n.n(h),_=(n("UVIz"),{render:function(){this.$createElement;this._self._c;return this._m(0)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"Banner"},[e("img",{attrs:{src:"/static/img/banner.jpg",alt:""}}),this._v(" "),e("span",[this._v("十五亿人都在用云笔记^_^")])])}]});var w=n("VU/8")({},_,!1,function(t){n("xFK2")},"data-v-77dbcb91",null).exports,b=n("cCou"),$={name:"UserBox",data:function(){return{formdata:{username:"",password:""}}},methods:{login:function(){var t=this;this.formdata.username&&this.formdata.password?this.$axios.post("/login",this.formdata).then(function(e){200==e.code?(t.$message.success(e.msg),t.$store.commit("CHANGEINFO",e.data)):t.$message.error(e.msg)}):this.$message({message:"请输入用户名或密码",type:"warning"})},handleLogout:function(){var t=this;return o()(r.a.mark(function e(){var n,a;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.$axios.get("/logout");case 2:n=e.sent,console.log(n),a={_id:"",avatar:"",email:"",username:"",password:""},200==n.code?(t.$message.success("退出登录成功"),t.$store.commit("CHANGEINFO",a)):(t.$store.commit("CHANGEINFO",a),t.$message({type:"warning",message:"登录状态失效，自动退出登录"}));case 6:case"end":return e.stop()}},e,t)}))()}}},C={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"right-box"},[t.$store.state.userinfo.username?n("div",{staticClass:"user-box"},[n("div",{staticClass:"user-box-item user-icon"},[n("img",{attrs:{src:t.$store.state.userinfo.avatar}})]),t._v(" "),n("div",{staticClass:"name-item"},[t._v("\n      "+t._s(t.$store.state.userinfo.username)+" \n    ")]),t._v(" "),n("div",{staticClass:"email-item"},[t._v("\n        "+t._s(t.$store.state.userinfo.email)+"\n    ")]),t._v(" "),n("div",[n("el-button",{staticStyle:{width:"100%","margin-top":"10px"},attrs:{type:"primary"},on:{click:function(e){t.$router.push("/reviseuser?email="+t.$store.state.userinfo.email)}}},[t._v("修改个人信息")]),t._v(" "),n("el-button",{staticStyle:{width:"100%",margin:"10px 0 0 0"},attrs:{type:"warning"},on:{click:t.handleLogout}},[t._v("退出登录 ")])],1)]):n("div",{staticClass:"login-box"},[n("div",{staticClass:"item"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.formdata.username,expression:"formdata.username"}],attrs:{type:"text",placeholder:"邮箱"},domProps:{value:t.formdata.username},on:{input:function(e){e.target.composing||t.$set(t.formdata,"username",e.target.value)}}})]),t._v(" "),n("div",{staticClass:"item"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.formdata.password,expression:"formdata.password"}],attrs:{type:"password",placeholder:"密码"},domProps:{value:t.formdata.password},on:{keyup:function(e){return"button"in e||!t._k(e.keyCode,"enter",13,e.key,"Enter")?t.login(e):null},input:function(e){e.target.composing||t.$set(t.formdata,"password",e.target.value)}}})]),t._v(" "),n("div",{staticClass:"item"},[n("el-button",{staticClass:"_el-btn",attrs:{type:"primary"},on:{click:t.login}},[t._v("\n        登录\n      ")])],1),t._v(" "),n("div",{staticClass:"item"},[n("el-button",{staticClass:"_el-btn",on:{click:function(e){t.$router.push("/register")}}},[t._v("\n        注册\n      ")])],1)])])},staticRenderFns:[]};var x=n("VU/8")($,C,!1,function(t){n("/0dl")},"data-v-3b1db78c",null).exports,y={components:{Banner:w,Notelist:b.a,Userlogin:x},created:function(){if(console.log(this.$route.query.state),0==this.$route.query.state){this.$store.commit("CHANGEINFO",{_id:"",avatar:"",email:"",username:"",password:""})}}},F={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",[e("el-breadcrumb",{staticStyle:{margin:"15px 0"},attrs:{"separator-class":"el-icon-arrow-right"}},[e("el-breadcrumb-item",{attrs:{to:{path:"/"}}},[this._v("首页")])],1),this._v(" "),e("div",{staticClass:"bigbox"},[e("div",{staticClass:"letf_box fll"},[e("Banner"),this._v(" "),e("Notelist",{attrs:{isshow2:!0}})],1),this._v(" "),e("div",{staticClass:" flr"},[e("Userlogin")],1)])],1)},staticRenderFns:[]};var N=n("VU/8")(y,F,!1,function(t){n("x0aM")},"data-v-ed354a3c",null).exports;a.default.use(f.a);var k={register:function(){return n.e(3).then(n.bind(null,"c2lw"))},writenote:function(){return n.e(0).then(n.bind(null,"PCn7"))},notelist:function(){return n.e(5).then(n.bind(null,"iAac"))},article:function(){return n.e(2).then(n.bind(null,"AtFq"))},reviseuser:function(){return n.e(4).then(n.bind(null,"hp21"))},mynotelist:function(){return n.e(1).then(n.bind(null,"s1GY"))}},E=new f.a({routes:[{path:"/",meta:{title:"首页"},component:N},{path:"/register",meta:{title:"注册页"},component:k.register},{path:"/writenote",meta:{title:"写笔记页"},component:k.writenote},{path:"/notelist",meta:{title:"笔记列表页"},component:k.notelist},{path:"/article",meta:{title:"笔记详情页"},component:k.article},{path:"/reviseuser",meta:{title:"修改个人信息页"},component:k.reviseuser},{path:"/mynotelist",meta:{title:"我的笔记页"},component:k.mynotelist},{path:"/reviseaRticle",meta:{title:"编辑我的笔记页"},component:k.writenote}]});E.beforeEach(function(t,e,n){t.meta&&t.meta.title&&(document.title=t.meta.title),n()}),E.beforeEach(function(t,e,n){g.a.start(),n()}),E.afterEach(function(t,e){g.a.done()});var I=E,H=n("zL8q"),U=n.n(H),A=(n("tvR6"),n("//Fk")),O=n.n(A),R=n("mtWM"),z=n.n(R).a.create({baseURL:"/",timeout:1e4}),G={get:function(t,e,n){return new O.a(function(a,s){z.get(t,{params:e},n).then(function(t){401==t.data.code&&(console.log("登录失效get"),H.Message.warning("登录状态失效，正在跳转。。。"),I.push("/")),a(t.data)}).catch(function(t){s("err:"+t)})})},fetch:function(t,e,n,a){return new O.a(function(s,r){z[a](t,e,n).then(function(t){401==t.data.code&&(console.log("登录失效fetch"),H.Message.warning("登录状态失效，正在跳转。。。"),I.push("/?state=0")),s(t.data)}).catch(function(t){r("err:"+t)})})},put:function(t,e,n){return this.fetch(t,e,n,"put")},delete:function(t,e,n){return this.fetch(t,e,n,"delete")},post:function(t,e,n){return this.fetch(t,e,n,"post")}},L=n("NYxO"),V=n("424j");a.default.use(L.a);var S=new L.a.Store({state:{userinfo:{_id:"",avatar:"",email:"",username:"",password:""}},mutations:{CHANGEINFO:function(t,e){t.userinfo=e}},actions:{},plugins:[Object(V.a)({storage:{getItem:function(t){return sessionStorage.getItem(t)},setItem:function(t,e){return sessionStorage.setItem(t,e)},removeItem:function(t){return sessionStorage.removeItem(t)}}})]});a.default.use(U.a),a.default.prototype.$axios=G,a.default.config.productionTip=!1,new a.default({el:"#app",router:I,store:S,components:{App:v},template:"<App/>"})},Pzn0:function(t,e){},UVIz:function(t,e){},cCou:function(t,e,n){"use strict";var a={props:{isshow2:{type:Boolean},screen:{type:String}},data:function(){return{data:"",count:1,paging:{pn:1,size:4}}},methods:{getdata:function(){var t=this;this.$axios.get("/article",this.paging).then(function(e){t.isshow2?t.data=e.data.slice(0,1):(t.data=e.data,t.count=e.count)})},pagding:function(t){this.paging.pn=t,this.getdata()}},created:function(){this.getdata()},computed:{screendata:function(){var t=this;return this.screen?this.data.filter(function(e){return-1!=e.title.indexOf(t.screen)}):this.data}}},s={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"Notelist"},[n("ul",t._l(t.screendata,function(e,a){return n("li",{key:a,on:{click:function(n){t.$router.push("/article?id="+e._id)}}},[n("div",{staticClass:"top"},[n("div",{staticClass:"top_left "},[n("img",{staticClass:"img_ys",attrs:{src:e.author.avatar,alt:""}})]),t._v(" "),n("div",{staticClass:"top_right"},[n("div",{staticClass:"info_top clearfix"},[n("h2",[t._v("用户名："),n("span",[t._v(t._s(e.author.username))])]),t._v(" "),n("h2",[t._v("标题: "),n("span",[t._v(t._s(e.title))])])]),t._v(" "),n("div",{staticClass:"info_bot"},[n("span",[t._v("浏览："+t._s(e.readnumber))]),t._v(" "),n("span",[t._v("回复："+t._s(e.commonnumber.length))]),t._v(" "),n("span",[t._v("分类："+t._s(e.category.catename))])])])]),t._v(" "),n("div",{staticClass:"bottom"},[t._v("\n                "+t._s(e.contentText)+"\n            ")])])})),t._v(" "),t.isshow2||t.screen?t._e():n("el-pagination",{attrs:{background:"",layout:"prev, pager, next","page-size":t.paging.size,total:t.count},on:{"current-change":t.pagding}}),t._v(" "),t.isshow2?n("div",{staticClass:"isshow",on:{click:function(e){t.$router.push("/notelist")}}},[t._v("\n        点击查看更多笔记\n    ")]):t._e()],1)},staticRenderFns:[]};var r=n("VU/8")(a,s,!1,function(t){n("Jjzg")},"data-v-12ac964a",null);e.a=r.exports},rlFD:function(t,e){},tvR6:function(t,e){},x0aM:function(t,e){},xFK2:function(t,e){}},["NHnr"]);
//# sourceMappingURL=app.5f89f7045cf993476b4a.js.map